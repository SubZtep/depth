import{_ as v,u as x}from"./index.c6e08072.js";import{d as C,a0 as V,A as D,W as $,aD as q,X as B,a2 as E,ar as T,as as L,q as d,c as u,g as t,F as M,l as N,i as o,h as b,a as S,E as j,U as g}from"./three.61db46b8.js";function z(k={}){return{supabase:globalThis.supabase}}const A="_table_gyu2z_2";var F={table:A};const J=t("caption",null,"Videos in database",-1),U=t("thead",null,[t("tr",null,[t("td",null,"id"),t("td",null,"src"),t("td",null,"duration"),t("td",null,"width"),t("td",null,"height"),t("td",null,"keyframes"),t("td",null,"poses"),t("td")])],-1),H=["onClick","disabled"],K=t("i",{class:"fat fa-trash"},null,-1),P=[K],W=["onClick","disabled"],X=t("i",{class:"fat fa-trash"},null,-1),G=[X],O=["onClick"],Q=t("i",{class:"fat fa-dumpster"},null,-1),R=[Q],Y={key:1,class:"text-2xl text-center bg-red-800 text-white p-4 m-4"},Z=C({setup(k){const l=x(),_=V(),{supabase:i}=z(),r=D([]),c=async()=>{const e=await i.from("video").select("id, src, duration, width, height, keyframe(count), pose(count)");e.error===null&&j(r,e.data)};$(async()=>{await c(),_.trigger(q)}),B(()=>{_.trigger(E)});const f=e=>{const a=g(r).find(({id:n})=>n===e);if(a===void 0)throw new Error("Video not found");return a},m=async e=>{if(f(e).keyframe[0].count>0){const{error:n}=await i.from("keyframe").delete({returning:"minimal"}).eq("video_id",e);if(n){l.error(n.message);return}await c()}},h=async e=>{if(f(e).pose[0].count>0){const{error:n}=await i.from("pose").delete({returning:"minimal"}).eq("video_id",e);if(n){l.error(n.message);return}await c()}},w=async e=>{if(g(r).find(({id:s})=>s===e)===void 0)return;await m(e),await h(e);const{error:n}=await i.from("video").delete({returning:"minimal"}).eq("id",e);if(n){l.error(n.message);return}await c()};return(e,a)=>{const n=T("stop-propagation");return r.value.length>0?L((d(),u("table",{key:0,class:S(e.$style.table)},[J,U,t("tbody",null,[(d(!0),u(M,null,N(r.value,s=>(d(),u("tr",null,[t("td",null,o(s.id),1),t("td",null,o(s.src),1),t("td",null,o(s.duration),1),t("td",null,o(s.width),1),t("td",null,o(s.height),1),t("td",null,[b(o(s.keyframe[0].count),1),t("button",{class:"btn ml-1",onClick:p=>m(s.id),disabled:s.keyframe[0].count===0},P,8,H)]),t("td",null,[b(o(s.pose[0].count),1),t("button",{class:"btn ml-1",onClick:p=>h(s.id),disabled:s.pose[0].count===0},G,8,W)]),t("td",null,[t("button",{class:"btn px-2 mx-2",onClick:p=>w(s.id),title:"Delete the full video"},R,8,O)])]))),256))])],2)),[[n]]):(d(),u("div",Y,"No video data"))}}}),y={};y.$style=F;var et=v(Z,[["__cssModules",y]]);export{et as default};
